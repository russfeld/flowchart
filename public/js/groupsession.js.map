{"version":3,"sources":["groupsession.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"groupsession.js","sourcesContent":["require(['util/site', 'lib/pusher'], function(site, pusher) {\n\n\tsite.ajaxcrsf();\n\n\tvar getStatus = function(data){\n\t\tif(data.status === 0) return \"NEW\";\n\t\tif(data.status === 1) return \"QUEUED\";\n\t\tif(data.status === 2) return \"BECKON\";\n\t\tif(data.status === 3) return \"DELAY\";\n\t\tif(data.status === 4) return \"ABSENT\";\n\t\tif(data.status === 5) return \"COMPLETE\";\n\t}\n\n\tvar listAdd = function(data){\n\t\t$('#groupList').append(\"<div class='alert alert-info' role='alert'>\" + data.name + \" <span class='badge'>\" + getStatus(data) + \"</span></div>\");\n\t}\n\n\t$('#groupRegisterBtn').on('click', function(){\n\t\t$('#groupSpin').removeClass('hide-spin');\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: '/groupsession/register',\n\t\t})\n\t\t.success(function( message ) {\n\t\t\tsite.displayMessage(message, \"success\");\n\t\t\tsite.clearFormErrors();\n\t\t\t$('#groupRegisterBtn').attr('disabled', 'disabled');\n\t\t\t$('#groupSpin').addClass('hide-spin');\n\t\t}).fail(function( jqXHR, message ){\n\t\t\tif (jqXHR.status == 422)\n\t\t\t{\n\t\t\t\tsite.setFormErrors(jqXHR.responseJSON);\n\t\t\t}else{\n\t\t\t\talert(\"Unable to register: \" + jqXHR.responseJSON);\n\t\t\t}\n\t\t\t$('#groupSpin').addClass('hide-spin');\n\t\t});\n\t});\n\n\tvar pusherInstance = new Pusher(pusherKey);\n\tvar groupSessionChannel = pusherInstance.subscribe( 'groupsession' );\n\n\tpusherInstance.connection.bind('connected', function() {\n\t  $('#groupRegisterBtn').removeAttr('disabled');\n\t\t$('#groupSpin').addClass('hide-spin');\n\t});\n\n\tgroupSessionChannel.bind( \"App\\\\Events\\\\GroupsessionRegister\", function(data){\n\t\tlistAdd(data);\n\t});\n\n\tPusher.log = function(message) {\n\t  if (window.console && window.console.log) {\n\t    window.console.log(message);\n\t  }\n\t};\n\n});\n"],"sourceRoot":"/source/"}