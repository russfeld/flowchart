{"version":3,"sources":["groupsession.js"],"names":[],"mappings":"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","file":"groupsession.js","sourcesContent":["require(['util/site', 'pusher', 'react', 'react-dom'], function(site, pusher, React, reactDOM) {\n\n\tsite.ajaxcrsf();\n\n\tvar userID = parseInt($('#userID').val());\n\tvar isAdvisor = parseInt($('#isAdvisor').val());\n\n\tvar getStatus = function(data){\n\t\tif(data === 0) return \"NEW\";\n\t\tif(data === 1) return \"QUEUED\";\n\t\tif(data === 2) return \"BECKON\";\n\t\tif(data === 3) return \"DELAY\";\n\t\tif(data === 4) return \"ABSENT\";\n\t\tif(data === 5) return \"COMPLETE\";\n\t}\n\n\t$('#groupRegisterBtn').on('click', function(){\n\t\t$('#groupSpin').removeClass('hide-spin');\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: '/groupsession/register',\n\t\t})\n\t\t.success(function( message ) {\n\t\t\tsite.displayMessage(message, \"success\");\n\t\t\tsite.clearFormErrors();\n\t\t\t$('#groupRegisterBtn').attr('disabled', 'disabled');\n\t\t\t$('#groupSpin').addClass('hide-spin');\n\t\t}).fail(function( jqXHR, message ){\n\t\t\tif (jqXHR.status == 422)\n\t\t\t{\n\t\t\t\tsite.setFormErrors(jqXHR.responseJSON);\n\t\t\t}else{\n\t\t\t\talert(\"Unable to register: \" + jqXHR.responseJSON);\n\t\t\t}\n\t\t\t$('#groupSpin').addClass('hide-spin');\n\t\t});\n\t});\n\n\tvar pusherInstance = new Pusher(pusherKey);\n\tvar groupSessionChannel = pusherInstance.subscribe( 'groupsession' );\n\n\tpusherInstance.connection.bind('connected', function() {\n\t  $('#groupRegisterBtn').removeAttr('disabled');\n\t\t$('#groupSpin').addClass('hide-spin');\n\t});\n\n\tPusher.log = function(message) {\n\t  if (window.console && window.console.log) {\n\t    window.console.log(message);\n\t  }\n\t};\n\n\tvar StudentRow = React.createClass({\n\t\trender: function(){\n\t\t\tvar badgeTitle = getStatus(this.props.student.status);\n\t\t\tif(isAdvisor === 1){\n\t\t\t\treturn(\n\t\t\t\t\t<div className=\"alert alert-info groupsession-div\" role=\"alert\"><button className=\"btn btn-danger pull-right groupsession-button del-button\" data-id={this.props.student.id}>X</button><button className=\"btn btn-primary pull-right groupsession-button done-button\" data-id={this.props.student.id}>Done</button><button className=\"btn btn-info pull-right groupsession-button put-button\" data-id={this.props.student.id}>Requeue</button><button className=\"btn btn-success pull-right groupsession-button take-button\" data-id={this.props.student.id}>Take</button>{this.props.student.name} <span className=\"badge\">{badgeTitle}</span></div>\n\t\t\t\t);\n\t\t\t}else if (userID === this.props.student.userid){\n\t\t\t\treturn(\n\t\t\t\t\t<div className=\"alert alert-info groupsession-small\" role=\"alert\"><b>{this.props.student.name}</b> <span className=\"badge\">{badgeTitle}</span></div>\n\t\t\t\t);\n\t\t\t}else{\n\t\t\t\treturn(\n\t\t\t\t\t<div className=\"alert alert-info groupsession-small\" role=\"alert\">{this.props.student.name} <span className=\"badge\">{badgeTitle}</span></div>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t})\n\n\tvar GroupList = React.createClass({\n\t\tgetInitialState: function(){\n\t\t\treturn {queue: []};\n\t\t},\n\t\tcomponentDidMount: function(){\n\t\t\tvar self = this;\n\t\t\tgroupSessionChannel.bind( \"App\\\\Events\\\\GroupsessionRegister\", function(data){\n\t\t\t\tvar queue = self.state.queue;\n\t\t\t\tvar found = false;\n\t\t\t\tvar len = queue.length;\n\t\t\t\tfor(var i = 0; i < len; i++){\n\t\t\t\t\tif(queue[i].id === data.id){\n\t\t\t\t\t\tqueue[i] = data;\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!found){\n\t\t\t\t\tqueue.push(data);\n\t\t\t\t}\n\t\t\t\tself.setState({queue: queue});\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t  method: \"GET\",\n\t\t\t  url: '/groupsession/queue',\n\t\t\t})\n\t\t\t.success(function( message ) {\n\t\t\t\tself.setState({queue: JSON.parse(message)});\n\t\t\t}).fail(function( jqXHR, message ){\n\t\t\t\tif (jqXHR.status == 422)\n\t\t\t\t{\n\t\t\t\t\tsite.setFormErrors(jqXHR.responseJSON);\n\t\t\t\t}else{\n\t\t\t\t\talert(\"Unable to get queue: \" + jqXHR.responseJSON);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\trender: function(){\n\t\t\tvar divs = [];\n\t\t\tthis.state.queue.forEach(function(student){\n\t\t\t\tdivs.push(<StudentRow key={student.id} student={student} />);\n\t\t\t});\n\t\t\treturn (\n\t\t\t\t<div>{divs}</div>\n\t\t\t);\n\t\t}\n\t});\n\n\treactDOM.render(\n\t\t<GroupList />,\n\t\tdocument.getElementById('groupList')\n\t);\n\n});\n"],"sourceRoot":"/source/"}