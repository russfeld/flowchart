require(["util/site","util/dashboard"],function(e,a){e.ajaxcrsf();var s=a.dataTableOptions;s.dom='<"newbutton">frtip',a.init(s),e.checkMessage(),$("div.newbutton").html('<a type="button" class="btn btn-success" href="/admin/newdepartment">New Department</a>'),$("#save").on("click",function(){$("#spin").removeClass("hide-spin");var a={name:$("#name").val(),email:$("#email").val(),office:$("#office").val(),phone:$("#phone").val()},s=$("#id").val();if(0==s.length)var n="/admin/newdepartment";else var n="/admin/departments/"+s;$.ajax({method:"POST",url:n,data:a}).success(function(a){0==s.length?(e.clearFormErrors(),$("#spin").addClass("hide-spin"),$(location).attr("href",a)):(e.displayMessage(a,"success"),e.clearFormErrors(),$("#spin").addClass("hide-spin"))}).fail(function(a,s){422==a.status?e.setFormErrors(a.responseJSON):alert("Unable to save: "+a.responseJSON),$("#spin").addClass("hide-spin")})}),$("#delete").on("click",function(){var a=confirm("Are you sure?");if(a===!0){$("#spin").removeClass("hide-spin");var s={id:$("#id").val()},n="/admin/deletedepartment";$.ajax({method:"POST",url:n,data:s}).success(function(e){$(location).attr("href","/admin/departments")}).fail(function(a,s){422==a.status?e.setFormErrors(a.responseJSON):alert("Unable to delete: "+a.responseJSON),$("#spin").addClass("hide-spin")})}}),$("#forcedelete").on("click",function(){var a=confirm("Are you sure? This will permanently remove all related records. You cannot undo this action.");if(a===!0){$("#spin").removeClass("hide-spin");var s={id:$("#id").val()},n="/admin/forcedeletedepartment";$.ajax({method:"POST",url:n,data:s}).success(function(e){$(location).attr("href","/admin/departments")}).fail(function(a,s){422==a.status?e.setFormErrors(a.responseJSON):alert("Unable to delete: "+a.responseJSON),$("#spin").addClass("hide-spin")})}}),$("#restore").on("click",function(){var a=confirm("Are you sure?");if(a===!0){$("#spin").removeClass("hide-spin");var s={id:$("#id").val()},n="/admin/restoredepartment";$.ajax({method:"POST",url:n,data:s}).success(function(e){$(location).attr("href","/admin/departments")}).fail(function(a,s){422==a.status?e.setFormErrors(a.responseJSON):alert("Unable to delete: "+a.responseJSON),$("#spin").addClass("hide-spin")})}})});