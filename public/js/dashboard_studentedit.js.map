{"version":3,"sources":["studentedit.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dashboard_studentedit.js","sourcesContent":["require(['util/site', 'util/dashboard'], function(site, dashboard) {\n\n  site.ajaxcrsf();\n\n  var options = dashboard.dataTableOptions;\n  options.dom = '<\"newbutton\">frtip';\n  dashboard.init(options);\n\n  $(\"div.newbutton\").html('<a type=\"button\" class=\"btn btn-success\" href=\"/admin/newstudent\">New Student</a>');\n\n  $('#save').on('click', function(){\n    $('#spin').removeClass('hide-spin');\n    var data = {\n      first_name: $('#first_name').val(),\n      last_name: $('#last_name').val(),\n      email: $('#email').val(),\n    };\n    if($('#advisor').val() > 0){\n      data.advisor = $('#advisor').val();\n    }\n    if($('#department').val() > 0){\n      data.department = $('#department').val();\n    }\n    var id = $('#id').val();\n    var url = '/admin/students/' + id;\n    $.ajax({\n      method: \"POST\",\n      url: url,\n      data: data\n    })\n    .success(function( message ) {\n      site.displayMessage(message, \"success\");\n      site.clearFormErrors();\n      $('#spin').addClass('hide-spin');\n    }).fail(function( jqXHR, message ){\n      if (jqXHR.status == 422)\n      {\n        site.setFormErrors(jqXHR.responseJSON);\n      }else{\n        alert(\"Unable to save: \" + jqXHR.responseJSON);\n      }\n      $('#spin').addClass('hide-spin');\n    });\n  });\n});\n"],"sourceRoot":"/source/"}