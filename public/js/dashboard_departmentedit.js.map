{"version":3,"sources":["departmentedit.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dashboard_departmentedit.js","sourcesContent":["require(['util/site', 'util/dashboard'], function(site, dashboard) {\n\n  site.ajaxcrsf();\n\n  var options = dashboard.dataTableOptions;\n  options.dom = '<\"newbutton\">frtip';\n  dashboard.init(options);\n  site.checkMessage();\n\n  $(\"div.newbutton\").html('<a type=\"button\" class=\"btn btn-success\" href=\"/admin/newdepartment\">New Department</a>');\n\n  $('#save').on('click', function(){\n    $('#spin').removeClass('hide-spin');\n    var data = {\n      name: $('#name').val(),\n      email: $('#email').val(),\n      office: $('#office').val(),\n      phone: $('#phone').val(),\n    };\n    var id = $('#id').val();\n    if(id.length == 0){\n      var url = '/admin/newdepartment';\n    }else{\n      var url = '/admin/departments/' + id;\n    }\n    $.ajax({\n      method: \"POST\",\n      url: url,\n      data: data\n    })\n    .success(function( message ) {\n      if(id.length == 0){\n        site.clearFormErrors();\n        $('#spin').addClass('hide-spin');\n        $(location).attr('href', message);\n      }else{\n        site.displayMessage(message, \"success\");\n        site.clearFormErrors();\n        $('#spin').addClass('hide-spin');\n      }\n    }).fail(function( jqXHR, message ){\n      if (jqXHR.status == 422)\n      {\n        site.setFormErrors(jqXHR.responseJSON);\n      }else{\n        alert(\"Unable to save: \" + jqXHR.responseJSON);\n      }\n      $('#spin').addClass('hide-spin');\n    });\n  });\n\n  $('#delete').on('click', function(){\n    var choice = confirm(\"Are you sure?\");\n\t\tif(choice === true){\n      $('#spin').removeClass('hide-spin');\n      var data = {\n        id: $('#id').val(),\n      };\n      var url = \"/admin/deletedepartment\"\n      $.ajax({\n        method: \"POST\",\n        url: url,\n        data: data\n      })\n      .success(function( message ) {\n        $(location).attr('href', '/admin/departments');\n      })\n      .fail(function( jqXHR, message ){\n        if (jqXHR.status == 422)\n        {\n          site.setFormErrors(jqXHR.responseJSON);\n        }else{\n          alert(\"Unable to delete: \" + jqXHR.responseJSON);\n        }\n        $('#spin').addClass('hide-spin');\n      });\n    }\n  });\n\n  $('#forcedelete').on('click', function(){\n    var choice = confirm(\"Are you sure? This will permanently remove all related records. You cannot undo this action.\");\n\t\tif(choice === true){\n      $('#spin').removeClass('hide-spin');\n      var data = {\n        id: $('#id').val(),\n      };\n      var url = \"/admin/forcedeletedepartment\"\n      $.ajax({\n        method: \"POST\",\n        url: url,\n        data: data\n      })\n      .success(function( message ) {\n        $(location).attr('href', '/admin/departments');\n      })\n      .fail(function( jqXHR, message ){\n        if (jqXHR.status == 422)\n        {\n          site.setFormErrors(jqXHR.responseJSON);\n        }else{\n          alert(\"Unable to delete: \" + jqXHR.responseJSON);\n        }\n        $('#spin').addClass('hide-spin');\n      });\n    }\n  });\n\n  $('#restore').on('click', function(){\n    var choice = confirm(\"Are you sure?\");\n\t\tif(choice === true){\n      $('#spin').removeClass('hide-spin');\n      var data = {\n        id: $('#id').val(),\n      };\n      var url = \"/admin/restoredepartment\"\n      $.ajax({\n        method: \"POST\",\n        url: url,\n        data: data\n      })\n      .success(function( message ) {\n        $(location).attr('href', '/admin/departments');\n      })\n      .fail(function( jqXHR, message ){\n        if (jqXHR.status == 422)\n        {\n          site.setFormErrors(jqXHR.responseJSON);\n        }else{\n          alert(\"Unable to delete: \" + jqXHR.responseJSON);\n        }\n        $('#spin').addClass('hide-spin');\n      });\n    }\n  });\n\n});\n"],"sourceRoot":"/source/"}