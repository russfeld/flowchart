{"version":3,"sources":["advisoredit.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dashboard_advisoredit.js","sourcesContent":["require(['util/site', 'util/dashboard'], function(site, dashboard) {\n\n  site.ajaxcrsf();\n\n  var options = dashboard.dataTableOptions;\n  options.dom = '<\"newbutton\">frtip';\n  dashboard.init(options);\n  site.checkMessage();\n\n  $(\"div.newbutton\").html('<a type=\"button\" class=\"btn btn-success\" href=\"/admin/newadvisor\">New Advisor</a>');\n\n\n  $('#save').on('click', function(){\n    var formData = new FormData($('form')[0]);\n\t\tformData.append(\"name\", $('#name').val());\n\t\tformData.append(\"email\", $('#email').val());\n\t\tformData.append(\"office\", $('#office').val());\n\t\tformData.append(\"phone\", $('#phone').val());\n\t\tformData.append(\"notes\", $('#notes').val());\n\t\tif($('#pic').val()){\n\t\t\tformData.append(\"pic\", $('#pic')[0].files[0]);\n\t\t}\n    if($('#department_id').val() > 0){\n      formData.append(\"department_id\", $('#department_id').val());\n    }\n    var id = $('#id').val();\n    if(id.length == 0){\n      formData.append(\"eid\", $('#eid').val());\n      var url = '/admin/newadvisor';\n    }else{\n      formData.append(\"eid\", $('#eid').val());\n      var url = '/admin/advisors/' + id;\n    }\n\t\tdashboard.ajaxobjectsave(formData, url, id);\n  });\n\n  $('#delete').on('click', function(){\n    var url = \"/admin/deleteadvisor\";\n    var retUrl = \"/admin/advisors\";\n    var data = {\n      id: $('#id').val(),\n    };\n    dashboard.ajaxdelete(data, url, retUrl, true);\n  });\n\n  $('#forcedelete').on('click', function(){\n    var url = \"/admin/forcedeleteadvisor\";\n    var retUrl = \"/admin/advisors\";\n    var data = {\n      id: $('#id').val(),\n    };\n    dashboard.ajaxdelete(data, url, retUrl);\n  });\n\n  $('#restore').on('click', function(){\n    var url = \"/admin/restoreadvisor\";\n    var retUrl = \"/admin/advisors\";\n    var data = {\n      id: $('#id').val(),\n    };\n    dashboard.ajaxrestore(data, url, retUrl);\n  });\n\n  $(document).on('change', '.btn-file :file', function() {\n    var input = $(this),\n        numFiles = input.get(0).files ? input.get(0).files.length : 1,\n        label = input.val().replace(/\\\\/g, '/').replace(/.*\\//, '');\n    input.trigger('fileselect', [numFiles, label]);\n  });\n\n  $('.btn-file :file').on('fileselect', function(event, numFiles, label) {\n\n      var input = $(this).parents('.input-group').find(':text'),\n          log = numFiles > 1 ? numFiles + ' files selected' : label;\n\n      if( input.length ) {\n          input.val(log);\n      } else {\n          if( log ) alert(log);\n      }\n\n  });\n\n});\n"]}