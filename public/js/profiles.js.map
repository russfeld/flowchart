{"version":3,"sources":["profiles.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"profiles.js","sourcesContent":["require(['util/site'], function(site) {\n\n\tsite.ajaxcrsf();\n\n\t$('#saveProfile').on('click', function(){\n\t\t$('#profileSpin').removeClass('hide-spin');\n\t\tvar data = {\n\t\t\tfirst_name: $('#first_name').val(),\n\t\t\tlast_name: $('#last_name').val(),\n\t\t};\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: '/profile/update',\n\t\t  data: data\n\t\t})\n\t\t.success(function( message ) {\n\t\t\tsite.displayMessage(message, \"success\");\n\t\t\tsite.clearFormErrors();\n\t\t\t$('#profileSpin').addClass('hide-spin');\n\t\t\t$('#profileAdvisingBtn').removeClass('hide-spin');\n\t\t}).fail(function( jqXHR, message ){\n\t\t\tif (jqXHR.status == 422)\n\t\t\t{\n\t\t\t\tsite.setFormErrors(jqXHR.responseJSON);\n\t\t\t}else{\n\t\t\t\talert(\"Unable to save profile: \" + jqXHR.responseJSON);\n\t\t\t}\n\t\t\t$('#profileSpin').addClass('hide-spin');\n\t\t});\n\t});\n\n\t$('#saveAdvisorProfile').on('click', function(){\n\t\t$('#profileSpin').removeClass('hide-spin');\n\t\tvar formData = new FormData($('form')[0]);\n\t\tformData.append(\"name\", $('#name').val());\n\t\tformData.append(\"email\", $('#email').val());\n\t\tformData.append(\"office\", $('#office').val());\n\t\tformData.append(\"phone\", $('#phone').val());\n\t\tformData.append(\"notes\", $('#notes').val());\n\t\tformData.append(\"pic\", $('#pic')[0].files[0]);\n\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: '/profile/update',\n\t\t  data: formData,\n\t\t\tdataType: 'json',\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t})\n\t\t.success(function( message ) {\n\t\t\tsite.displayMessage(message, \"success\");\n\t\t\tsite.clearFormErrors();\n\t\t\t$('#profileSpin').addClass('hide-spin');\n\t\t\t$('#profileAdvisingBtn').removeClass('hide-spin');\n\t\t}).fail(function( jqXHR, message ){\n\t\t\tif (jqXHR.status == 422)\n\t\t\t{\n\t\t\t\tsite.setFormErrors(jqXHR.responseJSON);\n\t\t\t}else{\n\t\t\t\talert(\"Unable to save profile: \" + jqXHR.responseJSON);\n\t\t\t}\n\t\t\t$('#profileSpin').addClass('hide-spin');\n\t\t});\n\t});\n\n\t//http://www.abeautifulsite.net/whipping-file-inputs-into-shape-with-bootstrap-3/\n\t$(document).on('change', '.btn-file :file', function() {\n\t  var input = $(this),\n\t      numFiles = input.get(0).files ? input.get(0).files.length : 1,\n\t      label = input.val().replace(/\\\\/g, '/').replace(/.*\\//, '');\n\t  input.trigger('fileselect', [numFiles, label]);\n\t});\n\n  $('.btn-file :file').on('fileselect', function(event, numFiles, label) {\n\n      var input = $(this).parents('.input-group').find(':text'),\n          log = numFiles > 1 ? numFiles + ' files selected' : label;\n\n      if( input.length ) {\n          input.val(log);\n      } else {\n          if( log ) alert(log);\n      }\n\n  });\n\n});\n"],"sourceRoot":"/source/"}