{"version":3,"sources":["dashboard.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dashboard.js","sourcesContent":["define(['util/site', 'adminlte', 'datatables.net', 'datatables.netbs', 'jquery.autocomplete'], function(site, adminlte, datatables, datatablesbs, autocomplete) {\n\n  function dashboardModule() {\n    //self-referential variable\n    //anything attached to this or self will be public\n    var self = this;\n\n    self.dataTableOptions = {\n      \"pageLength\": 50,\n      \"lengthChange\": false,\n    }\n\n    self.init = function(options){\n      options || (options = self.dataTableOptions);\n      $('#table').DataTable(options);\n    }\n\n    self.ajaxsave = function(data, url, id){\n      $('#spin').removeClass('hide-spin');\n      $.ajax({\n        method: \"POST\",\n        url: url,\n        data: data\n      })\n      .success(function( message ) {\n        if(id.length == 0){\n          site.clearFormErrors();\n          $('#spin').addClass('hide-spin');\n          $(location).attr('href', message);\n        }else{\n          site.displayMessage(message, \"success\");\n          site.clearFormErrors();\n          $('#spin').addClass('hide-spin');\n        }\n      }).fail(function( jqXHR, message ){\n        if (jqXHR.status == 422)\n        {\n          site.setFormErrors(jqXHR.responseJSON);\n        }else{\n          alert(\"Unable to save: \" + jqXHR.responseJSON);\n        }\n        $('#spin').addClass('hide-spin');\n      });\n    }\n\n    self.ajaxobjectsave = function (formData, url, id){\n      $('#spin').removeClass('hide-spin');\n      $.ajax({\n        method: \"POST\",\n        url: url,\n        data: formData,\n      \tdataType: 'json',\n      \tprocessData: false,\n      \tcontentType: false,\n      })\n      .success(function( message ) {\n        if(id.length == 0){\n          site.clearFormErrors();\n          $('#spin').addClass('hide-spin');\n          $(location).attr('href', message);\n        }else{\n      \t\tsite.displayMessage(message, \"success\");\n      \t\tsite.clearFormErrors();\n      \t\t$('#spin').addClass('hide-spin');\n      \t\t$.ajax({\n      \t\t\tmethod: \"GET\",\n      \t\t  url: '/profile/pic/' + id,\n      \t\t})\n      \t\t.success(function(message){\n      \t\t\t$('#pictext').val(message);\n      \t\t\t$('#picimg').attr('src', message);\n      \t\t});\n        }\n      }).fail(function( jqXHR, message ){\n      \tif (jqXHR.status == 422)\n      \t{\n      \t\tsite.setFormErrors(jqXHR.responseJSON);\n      \t}else{\n      \t\talert(\"Unable to save: \" + jqXHR.responseJSON);\n      \t}\n      \t$('#spin').addClass('hide-spin');\n      });\n    }\n\n    self.ajaxdelete = function (data, url, retUrl, soft = false){\n      if(soft){\n        var choice = confirm(\"Are you sure?\");\n      }else{\n        var choice = confirm(\"Are you sure? This will permanently remove all related records. You cannot undo this action.\");\n      }\n  \t\tif(choice === true){\n        $('#spin').removeClass('hide-spin');\n        $.ajax({\n          method: \"POST\",\n          url: url,\n          data: data\n        })\n        .success(function( message ) {\n          $(location).attr('href', retUrl);\n        })\n        .fail(function( jqXHR, message ){\n          if (jqXHR.status == 422)\n          {\n            site.setFormErrors(jqXHR.responseJSON);\n          }else{\n            alert(\"Unable to delete: \" + jqXHR.responseJSON);\n          }\n          $('#spin').addClass('hide-spin');\n        });\n      }\n    }\n\n    self.ajaxrestore = function(data, url, retUrl){\n      var choice = confirm(\"Are you sure?\");\n  \t\tif(choice === true){\n        $('#spin').removeClass('hide-spin');\n        var data = {\n          id: $('#id').val(),\n        };\n        $.ajax({\n          method: \"POST\",\n          url: url,\n          data: data\n        })\n        .success(function( message ) {\n          $(location).attr('href', retUrl);\n        })\n        .fail(function( jqXHR, message ){\n          if (jqXHR.status == 422)\n          {\n            site.setFormErrors(jqXHR.responseJSON);\n          }else{\n            alert(\"Unable to restore: \" + jqXHR.responseJSON);\n          }\n          $('#spin').addClass('hide-spin');\n        });\n      }\n    }\n\n    self.ajaxautocomplete = function(id, url){\n      $('#' + id + 'auto').autocomplete({\n    \t    serviceUrl: url,\n    \t    ajaxSettings: {\n    \t    \tdataType: \"json\"\n    \t    },\n          minChars: 3,\n    \t    onSelect: function (suggestion) {\n    \t        $('#' + id).val(suggestion.data);\n              $('#' + id + 'text').html(\"Selected: (\" + suggestion.data + \") \" + suggestion.value);\n    \t    },\n    \t    transformResult: function(response) {\n    \t        return {\n    \t            suggestions: $.map(response.data, function(dataItem) {\n    \t                return { value: dataItem.value, data: dataItem.data };\n    \t            })\n    \t        };\n    \t    }\n    \t});\n    }\n  };\n\n  return new dashboardModule();\n});\n"]}