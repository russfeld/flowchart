{"version":3,"sources":["calendarutilities.js","advisorcalendar.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"advisorcalendar.js","sourcesContent":["var session, calendarAdvisorID, studentName;\n\nvar displayMessage = function(message, type){\n\tvar html = '<div class=\"alert fade in alert-dismissable alert-' + type + '\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button><span class=\"h4\">' + message + '</span></div>';\n\t$('#message').append(html);\n\tsetTimeout(function() {\n\t\t$(\".alert\").alert('close');\n\t}, 3000);\n};\n\nvar ajaxcrsf = function(){\n\t$.ajaxSetup({\n\t\theaders: {\n\t\t\t'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t}\n\t});\n};\n\nvar calendarData = {\n\theader: {\n\t\tleft: 'prev,next today',\n\t\tcenter: 'title',\n\t\tright: 'agendaWeek,agendaDay'\n\t},\n\teditable: false,\n\teventLimit: true,\n\theight: 'auto',\n\tweekends: false,\n\tbusinessHours: {\n\t\tstart: '8:00', // a start time (10am in this example)\n\t\tend: '17:00', // an end time (6pm in this example)\n\t\tdow: [ 1, 2, 3, 4, 5 ]\n\t},\n\tdefaultView: 'agendaWeek',\n\tviews: {\n\t\tagenda: {\n\t\t\tallDaySlot: false,\n\t\t\tslotDuration: '00:20:00',\n\t\t\tminTime: '08:00:00',\n\t\t\tmaxTime: '17:00:00'\n\t\t}\n\t},\n\teventSources: [ \n\t\t{\n\t\t\turl: '/advising/meetingfeed',\n\t\t\ttype: 'GET',\n\t\t\terror: function() {\n\t\t\t\talert('Error fetching meeting events from database');\n\t\t\t},\n\t\t\tcolor: '#512888',\n\t\t\ttextColor: 'white',\n\t\t},\n\t\t{\n\t\t\turl: '/advising/blackoutfeed',\n\t\t\ttype: 'GET',\n\t\t\terror: function() {\n\t\t\t\talert('Error fetching blackout events from database');\n\t\t\t},\n\t\t\tcolor: '#FF8888',\n\t\t\ttextColor: 'black',\n\t\t},\n\t],\n\tselectable: true,\n\tselectHelper: true,\n\tselectOverlap: function(event) {\n\t\treturn event.rendering === 'background';\n\t},\n\ttimeFormat: ' ',\n};\n\nvar datePickerData = {\n    daysOfWeekDisabled: [0, 6],\n    format: 'LLL',\n    stepping: 20,\n    enabledHours: [8, 9, 10, 11, 12, 13, 14, 15, 16, 17],\n    maxHour: 17,\n    sideBySide: true,\n    ignoreReadonly: true,\n    allowInputToggle: true\n};\n\nvar datePickerDateOnly = {\n    daysOfWeekDisabled: [0, 6],\n    format: 'MM/DD/YYYY',\n    ignoreReadonly: true,\n    allowInputToggle: true\n};\n\nvar saveMeeting = function(){\n\t$('#createEventSpin').removeClass('hide-spin');\n\tvar data = { start: moment($('#start').val(), \"LLL\").format(), end: moment($('#end').val(), \"LLL\").format(), title: $('#title').val(), id: calendarAdvisorID, desc: $('#desc').val() };\n\tif($('#meetingID').val() > 0){\n\t\tdata.meetingid = $('#meetingID').val();\n\t}\n\tif($('#studentidval').val() > 0){\n\t\tdata.studentid = $('#studentidval').val();\n\t}\n\t$.ajax({\n\t  method: \"POST\",\n\t  url: '/advising/createmeeting',\n\t  data: data\n\t})\n\t.success(function( message ) {\n\t\t$('#createEvent').modal('hide');\n\t\tdisplayMessage(message, \"success\");\n\t\t$('#calendar').fullCalendar('unselect');\n\t\t$('#calendar').fullCalendar('refetchEvents');\n\t\t$('#createEventSpin').addClass('hide-spin');\n\t}).fail(function( jqXHR, message ){\n\t\tif (jqXHR.status == 422)\n\t\t{\n\t\t\t$('.form-group').each(function (){\n\t\t\t\t$(this).removeClass('has-error');\n\t\t\t\t$(this).find('.help-block').text('');\n\t\t\t});\n\t\t\t$.each(jqXHR.responseJSON, function (key, value) {\n\t\t\t\t$('#' + key).parents('.form-group').addClass('has-error');\n\t\t\t\t$('#' + key + 'help').text(value);\n\t\t\t});\n\t\t}else{\n\t\t\talert(\"Unable to save meeting: \" + jqXHR.responseJSON);\n\t\t}\n\t\t$('#createEventSpin').addClass('hide-spin');\n\t});\n};\n\nvar deleteMeeting = function(){\n\tvar choice = confirm(\"Are you sure?\");\n\tif(choice === true){\n\t\t$('#createEventSpin').removeClass('hide-spin');\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: '/advising/deletemeeting',\n\t\t  data: { meetingid: $('#meetingID').val() }\n\t\t})\n\t\t.success(function( message ) {\n\t\t\t$('#createEvent').modal('hide');\n\t\t\tdisplayMessage(message, \"success\");\n\t\t\t$('#calendar').fullCalendar('unselect');\n\t\t\t$('#calendar').fullCalendar('refetchEvents');\n\t\t\t$('#createEventSpin').addClass('hide-spin');\n\t\t}).fail(function( jqXHR, message ){\n\t\t\talert(\"Unable to delete meeting: \" + jqXHR.responseJSON);\n\t\t\t$('#createEventSpin').addClass('hide-spin');\n\t\t});\n\t}\n};\n\nvar showMeetingForm = function(event){\n\t$('#title').val(event.title);\n\t$('#start').val(event.start.format(\"LLL\"));\n\t$('#end').val(event.end.format(\"LLL\"));\n\t$('#desc').val(event.desc);\n\tdurationOptions(event.start, event.end);\n\t$('#meetingID').val(event.id);\n\t$('#deleteButton').show();\n\t$('#createEvent').modal('show');\n};\n\nvar createMeetingForm = function(studentName){\n\tif(studentName !== undefined){\n\t\t$('#title').val(studentName);\n\t}else{\n\t\t$('#title').val('');\n\t}\n\t$('#start').val(session.start.format(\"LLL\"));\n\t$('#end').val(session.end.format(\"LLL\"));\n\tdurationOptions(session.start, session.end);\n\t$('#meetingID').val(-1);\n\t$('#studentidval').val(-1);\n\t$('#deleteButton').hide();\n\t$('#createEvent').modal('show');\n};\n\nvar resetForm = function(){\n    $(this).find('form')[0].reset();\n    $(this).find('.has-error').each(function(){\n\t\t$(this).removeClass('has-error');\n\t});\n\t$(this).find('.help-block').each(function(){\n\t\t$(this).text('');\n\t});\n};\n\nvar durationOptions = function(start, end){\n\t$('#duration').empty();\n\t$('#duration').append(\"<option value='20'>20 minutes</option>\");\n\tif(start.hour() < 16 || (start.hour() == 16 && start.minutes() <= 20)){\n\t\t$('#duration').append(\"<option value='40'>40 minutes</option>\");\n\t}\n\tif(start.hour() < 16 || (start.hour() == 16 && start.minutes() <= 0)){\n\t\t$('#duration').append(\"<option value='60'>60 minutes</option>\");\n\t}\n\t$('#duration').val(end.diff(start, \"minutes\"));\n}\n\nvar linkDatePickers = function(elem1, elem2, duration){\n\t$(elem1 + \"_datepicker\").on(\"dp.change\", function (e) {\n\t\tvar date2 = moment($(elem2).val(), 'LLL');\n\t\tif(e.date.isAfter(date2) || e.date.isSame(date2)){\n\t\t\tdate2 = e.date.clone();\n\t\t\t$(elem2).val(date2.format(\"LLL\"));\n\t\t}\n    });\n    $(elem2 + \"_datepicker\").on(\"dp.change\", function (e) {\n        var date1 = moment($(elem1).val(), 'LLL');\n\t\tif(e.date.isBefore(date1) || e.date.isSame(date1)){\n\t\t\tdate1 = e.date.clone();\n\t\t\t$(elem1).val(date1.format(\"LLL\"));\n\t\t}\n    });\n}\n\nvar changeDuration = function(){\n\tvar newDate = moment($('#start').val(), 'LLL').add($(this).val(), \"minutes\");\n\t$('#end').val(newDate.format(\"LLL\"));\n}\n\n","$(document).ready(function() {\n\n\tajaxcrsf();\n\n\t$('#createEvent').on('shown.bs.modal', function () {\n\t  $('#studentid').focus();\n\t});\n\n\t$('#createBlackout').on('shown.bs.modal', function () {\n\t  $('#btitle').focus();\n\t});\n\n\t$('#createBlackout').on('hidden.bs.modal', function(){\n\t\t$('#repeatdailydiv').hide();\n\t\t$('#repeatweeklydiv').hide();\n\t\t$('#repeatuntildiv').hide();\n\t\t$(this).find('form')[0].reset();\n\t    $(this).find('.has-error').each(function(){\n\t\t\t$(this).removeClass('has-error');\n\t\t});\n\t\t$(this).find('.help-block').each(function(){\n\t\t\t$(this).text('');\n\t\t});\n\t});\n\n\t$('#createEvent').on('hidden.bs.modal', resetForm);\n\n\t$('#title').prop('disabled', true);\n\t$('#start').prop('disabled', false);\n\t$('#studentid').prop('disabled', false);\n\t$('#start_span').removeClass('datepicker-disabled');\n\t$('#end').prop('disabled', false);\n\t$('#end_span').removeClass('datepicker-disabled');\n\t$('#studentiddiv').show();\n\n\t$('#studentid').autocomplete({\n\t    serviceUrl: 'profile/studentfeed',\n\t    ajaxSettings: {\n\t    \tdataType: \"json\"\n\t    },\n\t    onSelect: function (suggestion) {\n\t        $('#studentidval').val(suggestion.data);\n\t        $('#title').val($('#studentid').val());\n\t    },\n\t    transformResult: function(response) {\n        return {\n            suggestions: $.map(response.data, function(dataItem) {\n                return { value: dataItem.value, data: dataItem.data };\n            })\n        };\n    }\n\t});\n\n\t$('#start_datepicker').datetimepicker(datePickerData);\n\n    $('#end_datepicker').datetimepicker(datePickerData);\n\n \tlinkDatePickers('#start', '#end', '#duration');\n\n \t$('#bstart_datepicker').datetimepicker(datePickerData);\n\n    $('#bend_datepicker').datetimepicker(datePickerData);\n\n \tlinkDatePickers('#bstart', '#bend', '#bduration');\n\n \t$('#brepeatuntil_datepicker').datetimepicker(datePickerDateOnly);\n\n\tcalendarAdvisorID = $('#calendarAdvisorID').val().trim();\n\n\t// page is now ready, initialize the calendar...\n\tcalendarData.eventSources[0].data = {id: calendarAdvisorID};\n\tcalendarData.eventSources[1].data = {id: calendarAdvisorID};\n\tcalendarData.eventRender = function(event, element){\n\t\telement.addClass(\"fc-clickable\");\n\t};\n\tcalendarData.eventClick = function(event, element, view){\n\t\tif(event.type == 'm'){\n\t\t\t$('#studentid').val(event.studentname);\n\t\t\t$('#studentidval').val(event.student_id);\n\t\t\tshowMeetingForm(event);\n\t\t}else if (event.type == 'b'){\n\t\t\tsession = {\n\t\t\t\tevent: event\n\t\t\t};\n\t\t\tif(event.repeat == '0'){\n\t\t\t\tblackoutSeries();\n\t\t\t}else{\n\t\t\t\t$('#blackoutOption').modal('show');\n\t\t\t}\n\t\t}\n\t};\n\tcalendarData.select = function(start, end) {\n\t\tsession = {\n\t\t\tstart: start,\n\t\t\tend: end\n\t\t};\n\t\t$('#bblackoutid').val(-1);\n\t\t$('#bblackouteventid').val(-1);\n\t\t$('#meetingID').val(-1);\n\t\t$('#meetingOption').modal('show');\n\t};\n\n\t$('#calendar').fullCalendar(calendarData);\n\n\t$('#saveButton').bind('click', saveMeeting);\n\n\t$('#deleteButton').bind('click', deleteMeeting);\n\n\t$('#brepeat').change(repeatChange);\n\n\t$('#saveBlackoutButton').bind('click', saveBlackout);\n\n\t$('#deleteBlackoutButton').bind('click', deleteBlackout);\n\n\t$('#blackoutSeries').bind('click', function(){\n\t\t$('#blackoutOption').modal('hide');\n\t\tblackoutSeries();\n\t});\n\n\t$('#blackoutOccurrence').bind('click', function(){\n\t\t$('#blackoutOption').modal('hide');\n\t\tblackoutOccurrence();\n\t});\n\n\t$('#advisingButton').bind('click', function(){\n\t\t$('#meetingOption').modal('hide');\n\t\tcreateMeetingForm();\n\t});\n\n\t$('#blackoutButton').bind('click', function(){\n\t\t$('#meetingOption').modal('hide');\n\t\tcreateBlackoutForm();\n\t});\n\n\t$('#duration').on('change', changeDuration);\n\n});\n\nvar createBlackoutForm = function(){\n\t$('#btitle').val(\"\");\n\t$('#bstart').val(session.start.format('LLL'));\n\t$('#bend').val(session.end.format('LLL'));\n\t$('#bblackoutid').val(-1);\n\t$('#repeatdiv').show();\n\t$('#brepeat').val(0);\n\t$('#brepeat').trigger('change');\n\t$('#deleteBlackoutButton').hide();\n\t$('#createBlackout').modal('show');\n};\n\nvar blackoutOccurrence = function(){\n\t$('#blackoutOption').modal('hide');\n\t$('#btitle').val(session.event.title);\n\t$('#bstart').val(session.event.start.format(\"LLL\"));\n\t$('#bend').val(session.event.end.format(\"LLL\"));\n\t$('#repeatdiv').hide();\n\t$('#repeatdailydiv').hide();\n\t$('#repeatweeklydiv').hide();\n\t$('#repeatuntildiv').hide();\n\t$('#bblackoutid').val(session.event.blackout_id);\n\t$('#bblackouteventid').val(session.event.id);\n\t$('#deleteBlackoutButton').show();\n\t$('#createBlackout').modal('show');\n};\n\nvar blackoutSeries = function(){\n\t$('#blackoutOption').modal('hide');\n\t$.ajax({\n\t  method: \"GET\",\n\t  url: '/advising/blackout',\n\t  data: {id: session.event.blackout_id},\n\t  dataType: 'json'\n\t})\n\t.success(function( series ) {\n\t\t\t$('#btitle').val(series.title)\n\t\t\t$('#bstart').val(moment(series.start, 'YYYY-MM-DD HH:mm:ss').format('LLL'));\n\t\t\t$('#bend').val(moment(series.end, 'YYYY-MM-DD HH:mm:ss').format('LLL'));\n\t\t\t$('#bblackoutid').val(series.id);\n\t\t\t$('#bblackouteventid').val(-1);\n\t\t\t$('#repeatdiv').show();\n\t\t\t$('#brepeat').val(series.repeat_type);\n\t\t\t$('#brepeat').trigger('change');\n\t\t\tif(series.repeat_type == 1){\n\t\t\t\t$('#brepeatdaily').val(series.repeat_every);\n\t\t\t\t$('#brepeatuntil').val(moment(series.repeat_until, 'YYYY-MM-DD HH:mm:ss').format('MM/DD/YYYY'));\n\t\t\t}else if (series.repeat_type == 2){\n\t\t\t\t$('#brepeatweekly').val(series.repeat_every);\n\t\t\t\t$('#brepeatweekdays1').prop('checked', (series.repeat_detail.indexOf(\"1\") >= 0));\n\t\t\t\t$('#brepeatweekdays2').prop('checked', (series.repeat_detail.indexOf(\"2\") >= 0));\n\t\t\t\t$('#brepeatweekdays3').prop('checked', (series.repeat_detail.indexOf(\"3\") >= 0));\n\t\t\t\t$('#brepeatweekdays4').prop('checked', (series.repeat_detail.indexOf(\"4\") >= 0));\n\t\t\t\t$('#brepeatweekdays5').prop('checked', (series.repeat_detail.indexOf(\"5\") >= 0));\n\t\t\t\t$('#brepeatuntil').val(moment(series.repeat_until, 'YYYY-MM-DD HH:mm:ss').format('MM/DD/YYYY'));\n\t\t\t}\n\t\t\t$('#deleteBlackoutButton').show();\n\t\t\t$('#createBlackout').modal('show');\n\t}).fail(function( jqXHR, message ){\n\t\talert(\"Unable to retrieve blackout series: \" + jqXHR.responseJSON);\n\t});\n};\n\nvar repeatChange = function(){\n\tif($(this).val() == 0){\n\t\t$('#repeatdailydiv').hide();\n\t\t$('#repeatweeklydiv').hide();\n\t\t$('#repeatuntildiv').hide();\n\t}else if($(this).val() == 1){\n\t\t$('#repeatdailydiv').show();\n\t\t$('#repeatweeklydiv').hide();\n\t\t$('#repeatuntildiv').show();\n\t}else if($(this).val() == 2){\n\t\t$('#repeatdailydiv').hide();\n\t\t$('#repeatweeklydiv').show();\n\t\t$('#repeatuntildiv').show();\n\t}\n};\n\nvar saveBlackout = function(){\n\t$('#createBlackoutSpin').removeClass('hide-spin');\n\tvar data = { bstart: moment($('#bstart').val(), 'LLL').format(), bend: moment($('#bend').val(), 'LLL').format(), btitle: $('#btitle').val()};\n\tvar url;\n\n\tif($('#bblackouteventid').val() > 0){\n\t\turl = '/advising/createblackoutevent';\n\t\tdata.bblackouteventid = $('#bblackouteventid').val();\n\t}else{\n\t\turl = '/advising/createblackout';\n\t\tif($('#bblackoutid').val() > 0){\n\t\t\tdata.bblackoutid = $('#bblackoutid').val();\n\t\t}\n\t\tdata.brepeat = $('#brepeat').val();\n\t\tif($('#brepeat').val() == 1){\n\t\t\tdata.brepeatevery= $('#brepeatdaily').val();\n\t\t\tdata.brepeatuntil = moment($('#brepeatuntil').val(), \"MM/DD/YYYY\").format();\n\t\t}\n\t\tif($('#brepeat').val() == 2){\n\t\t\tdata.brepeatevery = $('#brepeatweekly').val();\n\t\t\tdata.brepeatweekdaysm = $('#brepeatweekdays1').prop('checked');\n\t\t\tdata.brepeatweekdayst = $('#brepeatweekdays2').prop('checked');\n\t\t\tdata.brepeatweekdaysw = $('#brepeatweekdays3').prop('checked');\n\t\t\tdata.brepeatweekdaysu = $('#brepeatweekdays4').prop('checked');\n\t\t\tdata.brepeatweekdaysf = $('#brepeatweekdays5').prop('checked');\n\t\t\tdata.brepeatuntil = moment($('#brepeatuntil').val(), \"MM/DD/YYYY\").format();\n\t\t}\n\t}\n\t$.ajax({\n\t  method: \"POST\",\n\t  url: url,\n\t  data: data\n\t})\n\t.success(function( message ) {\n\t\t$('#createBlackout').modal('hide');\n\t\tdisplayMessage(message, 'success');\n\t\t$('#calendar').fullCalendar('unselect');\n\t\t$('#calendar').fullCalendar('refetchEvents');\n\t\t$('#createBlackoutSpin').addClass('hide-spin');\n\t}).fail(function( jqXHR, message ){\n\t\tif (jqXHR.status == 422)\n\t\t{\n\t\t\t$('.form-group').each(function (){\n\t\t\t\t$(this).removeClass('has-error');\n\t\t\t\t$(this).find('.help-block').text('');\n\t\t\t});\n\t\t\t$.each(jqXHR.responseJSON, function (key, value) {\n\t\t\t\t$('#' + key).parents('.form-group').addClass('has-error');\n\t\t\t\t$('#' + key + 'help').text(value);\n\t\t\t});\n\t\t}else{\n\t\t\talert(\"Unable to save blackout: \" + jqXHR.responseJSON);\n\t\t}\n\t\t$('#createBlackoutSpin').addClass('hide-spin');\n\t});\n};\n\nvar deleteBlackout = function(){\n\tvar choice = confirm(\"Are you sure?\");\n\tif(choice === true){\n\t\t$('#createBlackoutSpin').removeClass('hide-spin');\n\t\tvar url, data;\n\t\tif($('#bblackouteventid').val() > 0){\n\t\t\turl = '/advising/deleteblackoutevent';\n\t\t\tdata = { bblackouteventid: $('#bblackouteventid').val() };\n\t\t}else{\n\t\t\turl = '/advising/deleteblackout';\n\t\t\tdata = { bblackoutid: $('#bblackoutid').val() };\n\t\t}\n\t\t$.ajax({\n\t\t  method: 'POST',\n\t\t  url: url,\n\t\t  data: data\n\t\t})\n\t\t.success(function( message ) {\n\t\t\t$('#createBlackout').modal('hide');\n\t\t\tdisplayMessage(message, 'success');\n\t\t\t$('#calendar').fullCalendar('unselect');\n\t\t\t$('#calendar').fullCalendar('refetchEvents');\n\t\t\t$('#createBlackoutSpin').addClass('hide-spin');\n\t\t}).fail(function( jqXHR, message ){\n\t\t\talert(\"Unable to delete blackout: \" + jqXHR.responseJSON);\n\t\t\t$('#createBlackoutSpin').addClass('hide-spin');\n\t\t});\n\t}\n};"],"sourceRoot":"/source/"}