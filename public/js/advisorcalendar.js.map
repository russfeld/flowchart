{"version":3,"sources":["advisorcalendar.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"advisorcalendar.js","sourcesContent":["$(document).ready(function() {\n\n\t$.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n\t});\n\n\t$('#createEvent').on('shown.bs.modal', function () {\n\t  $('#desc').focus()\n\t})\n\n\tvar calendarFeedURL = $('#calendarFeedURL').val().trim();\n\tvar calendarAdvisorID = $('#calendarAdvisorID').val().trim();\n\tvar calendarBlackoutFeedURL = $('#calendarBlackoutFeedURL').val().trim();\n\tvar calendarPostURL = $('#calendarPostURL').val().trim();\n\tvar calendarDeleteURL = $('#calendarDeleteURL').val().trim();\n\tvar blackoutPostURL = $('#blackoutPostURL').val().trim();\n\tvar blackoutDeleteURL = $('#blackoutDeleteURL').val().trim();\n\n    // page is now ready, initialize the calendar...\n\n    $('#calendar').fullCalendar({\n\t\theader: {\n\t\t\tleft: 'prev,next today',\n\t\t\tcenter: 'title',\n\t\t\tright: 'agendaWeek,agendaDay'\n\t\t},\n\t\teditable: false,\n\t\teventLimit: true,\n\t\theight: 'auto',\n\t\tweekends: false,\n\t\tbusinessHours: {\n\t\t    start: '8:00', // a start time (10am in this example)\n\t\t    end: '17:00', // an end time (6pm in this example)\n\t\t    dow: [ 1, 2, 3, 4, 5 ]\n\t\t},\n\t\tdefaultView: 'agendaWeek',\n\t\tviews: {\n\t        agenda: {\n\t        \tallDaySlot: false,\n\t        \tslotDuration: '00:20:00',\n\t        \tminTime: '08:00:00',\n\t        \tmaxTime: '17:00:00'\n\t        }\n\t\t},\n\t\teventSources: [ \n\t\t\t{\n\t\t        url: calendarFeedURL,\n\t\t        type: 'GET',\n\t\t        data: {\n\t\t            id: calendarAdvisorID,\n\t\t        },\n\t\t        error: function() {\n\t\t            alert('Error fetching meeting events from database');\n\t\t        },\n\t\t        color: '#512888',\n\t\t        textColor: 'white',\n\t\t    },\n\t\t    {\n\t\t        url: calendarBlackoutFeedURL,\n\t\t        type: 'GET',\n\t\t        data: {\n\t\t            id: calendarAdvisorID,\n\t\t        },\n\t\t        error: function() {\n\t\t            alert('Error fetching blackout events from database');\n\t\t        },\n\t\t        color: '#FF8888',\n\t\t        textColor: 'black',\n\t\t    },\n\t\t],\n\t    timeFormat: ' ',\n\t    eventRender: function(event, element){\n\t\t    element.addClass(\"fc-clickable\");\n\t\t},\n\t\teventClick: function(event, element, view){\n\t\t\tif(event.type == 'm'){\n\t\t\t\t$('#title').val(event.title);\n\t\t\t\t$('#start').val(event.start.format(\"LLL\"));\n\t\t\t\t$('#end').val(event.end.format(\"LLL\"));\n\t\t\t\t$('#desc').val(event.desc);\n\t\t\t\t$('#meetingID').val(event.id);\n\t\t\t\t$('#deleteButton').show();\n\t\t\t\t$('#createEvent').modal('show');\n\t\t\t}else if (event.type == 'b'){\n\t\t\t\t$('#btitle').val(event.title);\n\t\t\t\t$('#bstart').val(event.start.format(\"LLL\"));\n\t\t\t\t$('#bend').val(event.end.format(\"LLL\"));\n\t\t\t\t$('#bblackoutid').val(event.blackout_id);\n\t\t\t\t$('#deleteBlackoutButton').show();\n\t\t\t\t$('#createBlackout').modal('show');\n\t\t\t}\n\t\t},\n\t\tselectable: true,\n\t\tselectHelper: true,\n\t\tselectOverlap: function(event) {\n\t        return event.rendering === 'background';\n\t    },\n\t\tselect: function(start, end) {\n\t\t\t$('#btitle').val(\"\");\n\t\t\t$('#bstart').val(start.format(\"LLL\"));\n\t\t\t$('#bend').val(end.format(\"LLL\"));\n\t\t\t$('#bblackoutid').val(-1);\n\t\t\t$('#deleteBlackoutButton').hide();\n\t\t\t$('#createBlackout').modal('show');\n\t\t},\n\n\t});\n\n\t$('#saveButton').bind('click', function(){\n\t\tvar data = { start: moment($('#start').val(), \"LLL\").format(), end: moment($('#end').val(), \"LLL\").format(), title: $('#title').val(), id: calendarAdvisorID, desc: $('#desc').val() };\n\t\tif($('#meetingID').val() > 0){\n\t\t\tdata.meetingid = $('#meetingID').val();\n\t\t}\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: calendarPostURL,\n\t\t  data: data\n\t\t})\n\t  \t.success(function( message ) {\n\t  \t\t$('#createEvent').modal('hide');\n\t  \t\t$('#calendar').fullCalendar('unselect');\n\t  \t\t$('#calendar').fullCalendar('refetchEvents');\n\t  \t}).fail(function( jqXHR, message ){\n\t  \t\tif (jqXHR.status == 422)\n\t\t    {\n\t\t    \t$('.form-group').each(function (){\n\t\t    \t\t$(this).removeClass('has-error');\n\t\t    \t\t$(this).find('span').text('');\n\t\t    \t})\n\t\t        $.each(jqXHR.responseJSON, function (key, value) {\n\t\t            $('#' + key).parents('.form-group').addClass('has-error')\n\t\t            $('#' + key + 'help').text(value);\n\t\t        });\n\t\t    }else{\n\t  \t\t\talert(\"Unable to save meeting: \" + JSON.stringify(jqXHR) + ' ' + message)\n\t  \t\t}\n\t  \t});\n\t});\n\n\t$('#deleteButton').bind('click', function(){\n\t\tvar choice = confirm(\"Are you sure?\");\n\t\tif(choice == true){\n\t\t\t$.ajax({\n\t\t\t  method: \"POST\",\n\t\t\t  url: calendarDeleteURL,\n\t\t\t  data: { meetingid: $('#meetingID').val() }\n\t\t\t})\n\t\t\t.success(function( message ) {\n\t\t  \t\t$('#createEvent').modal('hide');\n\t\t  \t\t$('#calendar').fullCalendar('unselect');\n\t\t  \t\t$('#calendar').fullCalendar('refetchEvents');\n\t\t  \t}).fail(function( jqXHR, message ){\n\t  \t\t\talert(\"Unable to delete meeting: \" + JSON.stringify(jqXHR) + ' ' + message)\n\t\t  \t});\n\t\t}\n\t});\n\n\t$('#createBlackout .input-group.date').datepicker({\n\t    daysOfWeekDisabled: \"0,6\"\n\t});\n\n\t$('#brepeat').change(function() {\n\t\tif($(this).val() == 0){\n\t\t\t$('#repeatdailydiv').hide();\n\t\t\t$('#repeatweeklydiv').hide();\n\t\t\t$('#repeatuntildiv').hide();\n\t\t}else if($(this).val() == 1){\n\t\t\t$('#repeatdailydiv').show();\n\t\t\t$('#repeatweeklydiv').hide();\n\t\t\t$('#repeatuntildiv').show();\n\t\t}else if($(this).val() == 2){\n\t\t\t$('#repeatdailydiv').hide();\n\t\t\t$('#repeatweeklydiv').show();\n\t\t\t$('#repeatuntildiv').show();\n\t\t}\n\t});\n\n\t$('#saveBlackoutButton').bind('click', function(){\n\t\tvar data = { bstart: moment($('#bstart').val(), \"LLL\").format(), bend: moment($('#bend').val(), \"LLL\").format(), btitle: $('#btitle').val(), brepeat: $('#brepeat').val()};\n\t\tif($('#bblackoutid').val() > 0){\n\t\t\tdata.bblackoutid = $('#bblackoutid').val();\n\t\t}\n\t\tif($('#brepeat').val() == 1){\n\t\t\tdata.brepeatevery= $('#brepeatdaily').val();\n\t\t\tdata.brepeatuntil = moment($('#brepeatuntil').val(), \"MM/DD/YYYY\").format();\n\t\t}\n\t\tif($('#brepeat').val() == 2){\n\t\t\tdata.brepeatevery = $('#brepeatweekly').val();\n\t\t\tdata.brepeatweekdaysm = $('#brepeatweekdays1').prop('checked');\n\t\t\tdata.brepeatweekdayst = $('#brepeatweekdays2').prop('checked');\n\t\t\tdata.brepeatweekdaysw = $('#brepeatweekdays3').prop('checked');\n\t\t\tdata.brepeatweekdaysu = $('#brepeatweekdays4').prop('checked');\n\t\t\tdata.brepeatweekdaysf = $('#brepeatweekdays5').prop('checked');\n\t\t\tdata.brepeatuntil = moment($('#brepeatuntil').val(), \"MM/DD/YYYY\").format();\n\t\t}\n\t\t$.ajax({\n\t\t  method: \"POST\",\n\t\t  url: blackoutPostURL,\n\t\t  data: data\n\t\t})\n\t  \t.success(function( message ) {\n\t  \t\t$('#createBlackout').modal('hide');\n\t  \t\t$('#calendar').fullCalendar('unselect');\n\t  \t\t$('#calendar').fullCalendar('refetchEvents');\n\t  \t}).fail(function( jqXHR, message ){\n\t  \t\tif (jqXHR.status == 422)\n\t\t    {\n\t\t    \t$('.form-group').each(function (){\n\t\t    \t\t$(this).removeClass('has-error');\n\t\t    \t\t$(this).find('span').text('');\n\t\t    \t})\n\t\t        $.each(jqXHR.responseJSON, function (key, value) {\n\t\t            $('#' + key).parents('.form-group').addClass('has-error');\n\t\t            $('#' + key + 'help').text(value);\n\t\t        });\n\t\t    }else{\n\t  \t\t\talert(\"Unable to save blackout: \" + JSON.stringify(jqXHR) + ' ' + message)\n\t  \t\t}\n\t  \t});\n\t});\n\n\t$('#deleteBlackoutButton').bind('click', function(){\n\t\tvar choice = confirm(\"Are you sure?\");\n\t\tif(choice == true){\n\t\t\t$.ajax({\n\t\t\t  method: \"POST\",\n\t\t\t  url: blackoutDeleteURL,\n\t\t\t  data: { bblackoutid: $('#bblackoutid').val() }\n\t\t\t})\n\t\t\t.success(function( message ) {\n\t\t  \t\t$('#createBlackout').modal('hide');\n\t\t  \t\t$('#calendar').fullCalendar('unselect');\n\t\t  \t\t$('#calendar').fullCalendar('refetchEvents');\n\t\t  \t}).fail(function( jqXHR, message ){\n\t  \t\t\talert(\"Unable to delete blackout: \" + JSON.stringify(jqXHR) + ' ' + message)\n\t\t  \t});\n\t\t}\n\t});\n\n\t$('#createBlackout').on('hidden.bs.modal', function(){\n\t    $(this).find('form')[0].reset();\n\t    $('#repeatdailydiv').hide();\n\t\t$('#repeatweeklydiv').hide();\n\t\t$('#repeatuntildiv').hide();\n\t\t$(this).find('.has-error').each(function(){\n\t\t\t$(this).removeClass('has-error');\n\t\t})\n\t\t$(this).find('.help-block').each(function(){\n\t\t\t$(this).text('');\n\t\t})\n\t});\n\n\t$('#createMeeting').on('hidden.bs.modal', function(){\n\t    $(this).find('form')[0].reset();\n\t});\n\n});"],"sourceRoot":"/source/"}